<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ansible AdHoc Commands :: Workshop Ansible (Day 1)</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/workshop-ansible/02-ansible-adhoc-commands.html">
    <link rel="prev" href="01-prerequisites.html">
    <link rel="next" href="03-ansible-inventory.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">Workshop Ansible (Day 1)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="workshop-ansible" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-prerequisites.html">1. Prerequisites</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-prerequisites.html#installingcontrolnode">Installing Control Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-prerequisites.html#configuringansibleclients">Configuring Ansible Clients</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-prerequisites.html#validatingansibleconfiguration">Validating Ansible configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-prerequisites.html#usefullinks">Useful Links</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#ansibleadhoccommands">2. Ansible AdHocs Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#steps">Steps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#usefullinks">Useful Links</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-ansible-inventory.html">3. Ansible Inventory</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-ansible-inventory.html#introduction">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-ansible-inventory.html#inventorynestedgroups">Nested Groups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-ansible-inventory.html#commonconfiguration">Common Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-ansible-inventory.html#usingranges">Using ranges within inventories</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-ansible-inventory.html#checkinginventory">Checking inventory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-ansible-inventory.html#steps">Steps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-ansible-inventory.html#usefullinks">Useful Links</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-ansible-playbooks.html">4. Ansible Playbooks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-ansible-playbooks.html#introduction">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-ansible-playbooks.html#firstansibleplaybook">My first ansible playbook</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-ansible-playbooks.html#configureclients">Configure clients to run ansible tasks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-ansible-playbooks.html#steps">Steps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-ansible-playbooks.html#usefullinks">Useful Links</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Workshop Ansible (Day 1)</a></li>
    <li><a href="#ansibleadhoccommands">2. Ansible AdHocs Commands</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/jadebustos/workshop-ansible-day1/edit/master/documentation/modules/ROOT/pages/02-ansible-adhoc-commands.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Ansible AdHoc Commands</h1>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AdHoc command allows execute a single Ansible task in a programmatic and simple way.
This lesson dives in this Ansible feature.</p>
</div>
<div class="paragraph">
<p>An AdHoc command follow this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible [pattern] --module-name [module] --args "[module options]"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the <strong>pattern</strong> is to indicate the target hosts and groups.
It can be a single host or a group of hosts. In this example we are going to use
only one host, the localhost.</p>
</div>
<div class="paragraph">
<p>Where <strong>module</strong> is the name of the module you want to execute. There are many modules in Ansible,
later we will see them in detail. For now, it is important to know that modules help us execute tasks on hosts.</p>
</div>
<div class="paragraph">
<p>An example of a module is "debug", this module is used to print statements at runtime
and can be useful for debugging variables or expressions. Let&#8217;s run our first hello world in Ansible using debug!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible localhost --module-name debug --args 'msg="My first Hello world in Ansible!!"'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you can abbreviate the commands, --module-name or simply -m  and for --args you can use -a
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above command can be run this way too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible localhost -m debug -a 'msg="My first Hello world in Ansible!!"'</code></pre>
</div>
</div>
<div class="paragraph">
<p>To find out more details about a module, you can use <strong>ansible-doc</strong>.
It is to consult the documentation but from the command line. Very useful!</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible-doc debug</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="steps"><a class="anchor" href="#steps"></a>Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the next exercise we are going to create a new user using AdHoc command.</p>
</div>
<div class="paragraph">
<p>First, execute this instruction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible localhost -c local -m user -a "name=yourname"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Did it show any error? Why?
Create a new user requires special permissions and we are going to identify
how to indicate these permissions in Ansible.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible localhost -c local -m user -a "name=yourname" --become</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that you know the parameter <strong>--become</strong>. It is important to know that when
you run commands at the command line, you can interact with the execution.
In this case, you must provide the password of the user "student" to be able to
execute commands with privileges:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ansible localhost -c local -m user -a "name=yourname" --become --ask-become-pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>How can I check that the user has been created?
with this command you can check the new user is created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ls /home/</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usefullinks"><a class="anchor" href="#usefullinks"></a>Useful Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information, please visit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_patterns.html#id3" class="bare">https://docs.ansible.com/ansible/latest/user_guide/intro_patterns.html#id3</a></p>
</li>
<li>
<p><a href="https://docs.ansible.com/ansible/latest/user_guide/modules.html#working-with-modules" class="bare">https://docs.ansible.com/ansible/latest/user_guide/modules.html#working-with-modules</a></p>
</li>
<li>
<p><a href="https://docs.ansible.com/ansible/2.9/modules/modules_by_category.html" class="bare">https://docs.ansible.com/ansible/2.9/modules/modules_by_category.html</a></p>
</li>
<li>
<p><a href="https://docs.ansible.com/ansible/latest/user_guide/become.html" class="bare">https://docs.ansible.com/ansible/latest/user_guide/become.html</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="01-prerequisites.html">1. Prerequisites</a></span>
  <span class="next"><a href="03-ansible-inventory.html">3. Ansible Inventory</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
